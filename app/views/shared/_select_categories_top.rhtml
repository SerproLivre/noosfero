<% categories_selected ||= nil %>
<% title ||= nil %>

<% extend CategoriesHelper %>

<%= content_tag "h#{title_size}", title, :class => "box-title" %>

<%= hidden_field_tag "#{object_name}[category_ids][]", nil %>

<div id="category-ajax-selector">
<div id="select-categories">
    <%= render :partial => 'shared/select_categories', :locals => {:object_name => object_name, :multiple => true, :categories_selected => categories_selected }, :layout => false %>
</div>

<% unless categories_selected.nil? %>
<hr>
<div class="categories-selected">
  <div id="selected-categories">
  <strong><%= _('Selected categories:') %></strong>
  <% categories_selected.each do |cat| %>
    <span id="selected-category-<%= cat.id %>">
      <%= hidden_field_tag("#{object_name}[category_ids][]", cat.id) %>
      <%= selected_category_link(cat) %>
    </span>
  <% end %>
  </div>
</div>
<% end %>
</div>
